<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dental Safe Check - Global AI</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&family=Noto+Sans+SC:wght@400;700&family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">

    <!-- Markdown Parser -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        body { font-family: 'Noto Sans KR', sans-serif; }
        .lang-sc { font-family: 'Noto Sans SC', sans-serif; }
        .lang-jp { font-family: 'Noto Sans JP', sans-serif; }
        
        .animate-fadeIn { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }

        @media print {
            .no-print { display: none !important; }
            body { background-color: white !important; -webkit-print-color-adjust: exact; }
            .w-full.max-w-md { max-width: 100% !important; box-shadow: none !important; }
            main { overflow: visible !important; height: auto !important; }
        }
        .loader {
            border: 3px solid #f3f3f3; border-radius: 50%; border-top: 3px solid #3b82f6;
            width: 20px; height: 20px; animation: spin 1s linear infinite;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;
        const apiKey = ""; 

        // --- Icons ---
        const Icon = ({ children, color = "currentColor", size = 24, className = "" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill="none" stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
        );
        const Icons = {
            Stethoscope: (p) => <Icon {...p}><path d="M4.8 2.3A.3.3 0 1 0 5 2H4a2 2 0 0 0-2 2v5a6 6 0 0 0 6 6v0a6 6 0 0 0 6-6V4a2 2 0 0 0-2-2h-1a.2.2 0 1 0 .3.3"/><path d="M8 15v6"/><path d="M11 17a6 6 0 0 1-6-6"/></Icon>,
            Activity: (p) => <Icon {...p}><polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/></Icon>,
            AlertTriangle: (p) => <Icon {...p}><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><line x1="12" y1="9" x2="12" y2="13"/><line x1="12" y1="17" x2="12.01" y2="17"/></Icon>,
            CheckCircle: (p) => <Icon {...p}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></Icon>,
            XCircle: (p) => <Icon {...p}><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></Icon>,
            ShieldAlert: (p) => <Icon {...p}><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></Icon>,
            FileText: (p) => <Icon {...p}><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></Icon>,
            User: (p) => <Icon {...p}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></Icon>,
            UserCheck: (p) => <Icon {...p}><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><polyline points="16 11 18 13 22 9"/></Icon>,
            ChevronRight: (p) => <Icon {...p}><polyline points="9 18 15 12 9 6"/></Icon>,
            RefreshCcw: (p) => <Icon {...p}><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"/><path d="M16 16h5v5"/></Icon>,
            HeartPulse: (p) => <Icon {...p}><path d="M19 14c1.49-1.28 3.6-2.34 4.58-2.74a.45.45 0 0 0 .19-.57 2.37 2.37 0 0 0-2.2-1.74c-.9 0-1.74.45-2.2 1.17l-.37.56a.46.46 0 0 1-.77 0l-2.07-3.1a.48.48 0 0 0-.79-.01l-1.37 1.95a.48.48 0 0 1-.77.02l-1.31-1.8a.48.48 0 0 0-.78-.01L4.85 15.3a.48.48 0 0 1-.84-.14L2.8 11.7a.48.48 0 0 0-.85-.09l-1.72 2.45a.45.45 0 0 0 .09.6c1.02.8 3.1 2.1 4.58 2.74a4.34 4.34 0 0 0 3.73-.25L12 15l2.45 1.55a4.34 4.34 0 0 0 3.72.25c.5-.22 1.42-.58 2.23-1.07l.2-.13"/></Icon>,
            Pill: (p) => <Icon {...p}><path d="m10.5 20.5 10-10a4.95 4.95 0 1 0-7-7l-10 10a4.95 4.95 0 1 0 7 7Z"/><line x1="8.5" y1="8.5" x2="15.5" y2="15.5"/></Icon>,
            Syringe: (p) => <Icon {...p}><path d="m18 2 4 4"/><path d="m17 7 3-3"/><path d="M19 9 8.7 19.3c-1 1-2.5 1-3.4 0l-.6-.6c-1-1-1-2.5 0-3.4L15 5"/><path d="m9 11 4 4"/><path d="m5 19-3 3"/></Icon>,
            Droplet: (p) => <Icon {...p}><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/></Icon>,
            Biohazard: (p) => <Icon {...p}><circle cx="12" cy="12" r="10" /><path d="M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20" stroke="none" /><path d="M8 12h8"/><path d="M12 8v8"/></Icon>,
            Printer: (p) => <Icon {...p}><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></Icon>,
            Sparkles: (p) => <Icon {...p}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z"/></Icon>,
            Settings: (p) => <Icon {...p}><path d="M12.22 2h-.44a2 2 0 0 1-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.73v.51a2 2 0 0 1-1 1.73l-.15.1a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73v.18a2 2 0 0 1 2 2h.44a2 2 0 0 1 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.38a2 2 0 0 0-.73-2.73l-.15-.1a2 2 0 0 1-1-1.73v-.51a2 2 0 0 1 1-1.73l.15-.1a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 1-2-2z"/><circle cx="12" cy="12" r="3"/></Icon>,
            Tooth: (p) => <Icon {...p}><path d="M4.2 18.2A6.66 6.66 0 0 1 4 15V8a4 4 0 0 1 4-4 4 4 0 0 1 4 4v3a4 4 0 0 1 4-4 4 4 0 0 1 4 4v7a6.66 6.66 0 0 1-.2 3.2 2 2 0 0 1-3.8 0A4 4 0 0 1 12 18a4 4 0 0 1-4.2.2 2 2 0 0 1-3.6 0Z"/></Icon>,
            Globe: (p) => <Icon {...p}><circle cx="12" cy="12" r="10"/><line x1="2" y1="12" x2="22" y2="12"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/></Icon>
        };

        // --- Translations ---
        const TRANSLATIONS = {
            ko: {
                title: "ÏπòÍ≥º ÏπòÎ£å Ï†Ñ ÏïàÏ†Ñ Ï†êÍ≤Ä",
                subtitle: "ÏïàÏ†ÑÌïú ÏßÑÎ£åÎ•º ÏúÑÌï¥ ÌôòÏûêÎ∂ÑÏùò Ï†ÑÏã† Í±¥Í∞ï ÏÉÅÌÉúÎ•º Ï≤¥ÌÅ¨Ìï©ÎãàÎã§.",
                startBtn: "ÏûêÍ∞ÄÏßÑÎã® ÏãúÏûëÌïòÍ∏∞",
                dentalHistoryTitle: "ÏπòÍ≥º ÏßÑÎ£å Ïù¥Î†• Ï≤¥ÌÅ¨",
                dentalHistoryDesc: "Í≥ºÍ±∞ ÏπòÍ≥º Í≤ΩÌóòÏóê ÎåÄÌï¥ Î®ºÏ†Ä ÏïåÎ†§Ï£ºÏÑ∏Ïöî.",
                q_extraction: "Í≥ºÍ±∞Ïóê ÏπòÍ≥ºÏóêÏÑú Ïù¥Î•º ÎΩëÏïÑÎ≥∏(Î∞úÏπò) Í≤ΩÌóòÏù¥ ÏûàÎÇòÏöî?",
                q_anesthesia: "ÏπòÍ≥º ÏπòÎ£å Ïãú ÎßàÏ∑® Ï£ºÏÇ¨Î•º ÎßûÏïÑÎ≥¥Ïã† Ï†ÅÏù¥ ÏûàÎÇòÏöî?",
                q_allergy: "ÌòπÏãú Í∑∏Îïå ÎßàÏ∑®Ï†úÏóê ÏïåÎü¨ÏßÄ Î∞òÏùëÏù¥ ÏûàÏóàÎÇòÏöî?",
                q_allergy_detail: "ÎëêÎìúÎü¨Í∏∞, Ìò∏Ìù°Í≥§ÎûÄ, ÏáºÌÅ¨ Îì±",
                medHistoryTitle: "Ï†ÑÏã† Í±¥Í∞ï ÏÉÅÌÉú",
                medHistoryDesc: "Ìï¥ÎãπÎêòÎäî Ìï≠Î™©Ïóê Ï≤¥ÌÅ¨Ìï¥Ï£ºÏÑ∏Ïöî.",
                yes: "ÎÑ§",
                no: "ÏïÑÎãàÏöî",
                yes_had: "ÎÑ§, ÏûàÏóàÏñ¥Ïöî",
                placeholder_bp: "ÌòÑÏû¨ ÌòàÏïïÏùÑ ÏïÑÏãúÎÇòÏöî?",
                placeholder_bs: "ÌòÑÏû¨ ÌòàÎãπ ÏÉÅÌÉú",
                placeholder_infectious: "Ìï¥ÎãπÎêòÎäî ÏßàÌôòÏùÑ Î™®Îëê ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî",
                q_hypertension: "ÌòÑÏû¨ Í≥†ÌòàÏïï ÏßÑÎã®ÏùÑ Î∞õÏïòÍ±∞ÎÇò ÌòàÏïïÏïΩÏùÑ Î≥µÏö© Ï§ëÏù¥Ïã†Í∞ÄÏöî?",
                d_hypertension: "ÏßÑÎã® Î∞õÏùÄ Ï†ÅÏù¥ ÏóÜÎçîÎùºÎèÑ ÌòàÏïïÏù¥ ÎÜíÎã§Í≥† ÎäêÎÅºÏãúÎ©¥ Ï≤¥ÌÅ¨Ìï¥Ï£ºÏÑ∏Ïöî.",
                q_diabetes: "ÎãπÎá®Î≥ëÏù¥ ÏûàÍ±∞ÎÇò Ïù∏ÏäêÎ¶∞/ÎãπÎá®ÏïΩÏùÑ ÏÇ¨Ïö© Ï§ëÏù¥Ïã†Í∞ÄÏöî?",
                d_diabetes: "ÎãπÎá®Í∞Ä ÏùòÏã¨ÎêòÍ±∞ÎÇò ÏµúÍ∑º ÌòàÎãπ ÏàòÏπò ÌôïÏù∏Ïù¥ ÌïÑÏöîÌïòÏãúÎ©¥ Ï≤¥ÌÅ¨Ìï¥Ï£ºÏÑ∏Ïöî.",
                q_anticoagulant: "ÌîºÎ•º Î¨ΩÍ≤å ÌïòÎäî ÏïΩ(ÏïÑÏä§ÌîºÎ¶∞, ÏôÄÌååÎ¶∞ Îì±)ÏùÑ ÎìúÏãúÎÇòÏöî?",
                d_anticoagulant: "Ïã¨ÌòàÍ¥Ä ÏßàÌôò, ÎáåÏ°∏Ï§ë ÏòàÎ∞© Î™©Ï†ÅÏúºÎ°ú Î≥µÏö© Ï§ëÏûÖÎãàÎã§.",
                q_bleeding: "ÏÉÅÏ≤òÍ∞Ä ÎÇ¨ÏùÑ Îïå ÌîºÍ∞Ä Ïûò Î©éÏßÄ ÏïäÍ±∞ÎÇò, Î©çÏù¥ ÏâΩÍ≤å ÎìúÎÇòÏöî?",
                d_bleeding: "Í≥ºÍ±∞ Î∞úÏπòÎÇò ÏàòÏà† ÌõÑ ÏßÄÌòàÏù¥ Ïñ¥Î†§Ïõ†Îçò Í≤ΩÌóòÏù¥ ÏûàÎã§Î©¥ Ï≤¥ÌÅ¨Ìï¥Ï£ºÏÑ∏Ïöî.",
                q_osteoporosis: "Í≥®Îã§Í≥µÏ¶ù ÏïΩÏùÑ ÎìúÏãúÍ±∞ÎÇò Ï£ºÏÇ¨Î•º ÎßûÏúºÏã† Ï†ÅÏù¥ ÏûàÎÇòÏöî?",
                d_osteoporosis: "ÎπÑÏä§Ìè¨Ïä§Ìè¨ÎÑ§Ïù¥Ìä∏ Í≥ÑÏó¥ ÏïΩÎ¨º Î≥µÏö© ÌòπÏùÄ Ï£ºÏÇ¨ ÏπòÎ£å Í≤ΩÌóò.",
                q_infectious: "Í∞ÑÏóº, Í≤∞Ìïµ Îì± Ï†ÑÏóºÏÑ± ÏßàÌôòÏùÑ ÏïìÍ≥† Í≥ÑÏã†Í∞ÄÏöî?",
                d_infectious: "Ï≤¥ÌÅ¨ Ïãú ÏÑ∏Î∂Ä Ìï≠Î™©ÏùÑ ÏÑ†ÌÉùÌï† Ïàò ÏûàÏäµÎãàÎã§. ÏùòÎ£åÏßÑÏùò ÏïàÏ†ÑÏùÑ ÏúÑÌï¥ Íº≠ ÏïåÎ†§Ï£ºÏÑ∏Ïöî.",
                q_endocarditis: "Í≥ºÍ±∞Ïóê Ïã¨ÎÇ¥ÎßâÏóºÏùÑ ÏïìÏïòÍ±∞ÎÇò Ïù∏Í≥µ Ïã¨Ïû• ÌåêÎßâ ÏàòÏà†ÏùÑ Î∞õÏúºÏÖ®ÎÇòÏöî?",
                d_endocarditis: "ÏÑ†Ï≤úÏÑ± Ïã¨Ïû• ÏßàÌôò Ìè¨Ìï®.",
                q_kidney: "Ïã†Ïû•(ÏΩ©Ìå•) Ìà¨ÏÑù Ï§ëÏù¥Í±∞ÎÇò Ïã¨Í∞ÅÌïú Í∞Ñ ÏßàÌôòÏù¥ ÏûàÏúºÏã†Í∞ÄÏöî?",
                d_kidney: "Í∞ÑÍ≤ΩÌôî, ÎßêÍ∏∞ Ïã†Î∂ÄÏ†Ñ Îì±.",
                q_pregnancy: "ÌòÑÏû¨ ÏûÑÏã† Ï§ëÏù¥Í±∞ÎÇò ÏûÑÏã† Í∞ÄÎä•ÏÑ±Ïù¥ ÏûàÎÇòÏöî?",
                d_pregnancy: "ÏàòÏú† Ï§ëÏù∏ Í≤ΩÏö∞ÎèÑ Ìè¨Ìï®Ìï¥Ï£ºÏÑ∏Ïöî.",
                btn_next: "Îã§Ïùå (Ï†ÑÏã†ÏßàÌôò Ï≤¥ÌÅ¨)",
                btn_result: "Í≤∞Í≥º ÌôïÏù∏ÌïòÍ∏∞",
                btn_reset: "Ï≤òÏùåÏúºÎ°ú",
                btn_print: "Ïù∏ÏáÑ",
                result_patient: "ÌôòÏûêÏö© Í≤∞Í≥º",
                result_doctor: "ÏùòÎ£åÏßÑÏö© ÏÉÅÏÑ∏",
                safe: "ÏßÑÎ£å Í∞ÄÎä•",
                caution: "ÏÉÅÎã¥ ÌïÑÏöî",
                danger: "Ï£ºÏùò ÏöîÎßù",
                msg_safe: "Ïò§Îäò ÏòàÏ†ïÎêú ÏπòÎ£åÎ•º Î∞õÏùÑ Ïàò ÏûàÏäµÎãàÎã§.",
                msg_caution: "ÏùòÎ£åÏßÑ ÏÉÅÎã¥ ÌõÑ ÏïàÏ†ÑÌïòÍ≤å ÏπòÎ£åÎ•º ÏßÑÌñâÌï† Ïàò ÏûàÏäµÎãàÎã§.",
                msg_danger: "ÏïàÏ†ÑÏùÑ ÏúÑÌï¥ ÎÇ¥Í≥º Ï†ÑÎ¨∏Ïùò ÏÜåÍ≤¨Ïù¥ ÌïÑÏöîÌïòÍ±∞ÎÇò, Ïò§Îäò ÏπòÎ£åÍ∞Ä ÎØ∏Î£®Ïñ¥Ïßà Ïàò ÏûàÏäµÎãàÎã§.",
                ai_title: "AI ÏπòÍ≥º ÏÉÅÎã¥ÏÜå",
                ai_desc: "Í∂ÅÍ∏àÌïú Ï†êÏùÑ Î¨ºÏñ¥Î≥¥ÏÑ∏Ïöî. AIÍ∞Ä ÏïåÍ∏∞ ÏâΩÍ≤å ÏÑ§Î™ÖÌï¥ÎìúÎ¶ΩÎãàÎã§.",
                ai_placeholder: "ÏßàÎ¨∏ÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî...",
                ai_btn: "ÏßàÎ¨∏",
                items_checked: "ÎÇ¥Í∞Ä Ï≤¥ÌÅ¨Ìïú Ìï≠Î™©",
                none: "ÌäπÏù¥ÏÇ¨Ìï≠ ÏóÜÏùå",
                other: "Í∏∞ÌÉÄ",
                input_other: "ÏßàÌôòÎ™ÖÏùÑ ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî"
            },
            en: {
                title: "Pre-treatment Dental Safety Check",
                subtitle: "We check your general health for safe treatment.",
                startBtn: "Start Assessment",
                dentalHistoryTitle: "Dental History",
                dentalHistoryDesc: "Please tell us about your past dental experiences.",
                q_extraction: "Have you ever had a tooth extracted?",
                q_anesthesia: "Have you ever had dental anesthesia (injections)?",
                q_allergy: "Did you have an allergic reaction to the anesthesia?",
                q_allergy_detail: "Hives, difficulty breathing, shock, etc.",
                medHistoryTitle: "Medical History",
                medHistoryDesc: "Please check all that apply.",
                yes: "Yes",
                no: "No",
                yes_had: "Yes, I did",
                placeholder_bp: "Do you know your current blood pressure?",
                placeholder_bs: "Current Blood Sugar Status",
                placeholder_infectious: "Please select all applicable diseases",
                q_hypertension: "Do you have hypertension or take blood pressure medication?",
                d_hypertension: "Check if you feel your blood pressure is high even without diagnosis.",
                q_diabetes: "Do you have diabetes or use insulin/medication?",
                d_diabetes: "Check if you suspect diabetes or need recent level check.",
                q_anticoagulant: "Do you take blood thinners (Aspirin, Warfarin, etc.)?",
                d_anticoagulant: "For cardiovascular disease or stroke prevention.",
                q_bleeding: "Do you bleed easily or have difficulty stopping bleeding?",
                d_bleeding: "History of prolonged bleeding after extraction/surgery.",
                q_osteoporosis: "Do you take osteoporosis medication or injections?",
                d_osteoporosis: "Bisphosphonates or injection therapy history.",
                q_infectious: "Do you have infectious diseases (Hepatitis, TB, etc.)?",
                d_infectious: "Please specify for safety.",
                q_endocarditis: "History of endocarditis or artificial heart valve?",
                d_endocarditis: "Includes congenital heart defects.",
                q_kidney: "On dialysis or have severe liver disease?",
                d_kidney: "Cirrhosis, end-stage renal failure, etc.",
                q_pregnancy: "Are you pregnant or possibly pregnant?",
                d_pregnancy: "Includes breastfeeding.",
                btn_next: "Next (Medical Check)",
                btn_result: "Check Results",
                btn_reset: "Reset",
                btn_print: "Print",
                result_patient: "Patient View",
                result_doctor: "Doctor View",
                safe: "Safe for Treatment",
                caution: "Consultation Needed",
                danger: "Attention Required",
                msg_safe: "You can receive the scheduled treatment today.",
                msg_caution: "Treatment can proceed safely after consultation.",
                msg_danger: "Treatment may be postponed for safety reasons.",
                ai_title: "AI Dental Assistant",
                ai_desc: "Ask any questions about your condition.",
                ai_placeholder: "Type your question...",
                ai_btn: "Ask",
                items_checked: "Items Checked",
                none: "None",
                other: "Other",
                input_other: "Please specify"
            },
            zh: {
                title: "ÁâôÁßëÊ≤ªÁñóÂâçÂÆâÂÖ®Ê£ÄÊü•",
                subtitle: "‰∏∫‰∫ÜÂÆâÂÖ®Ê≤ªÁñóÔºåÊàë‰ª¨ÈúÄË¶ÅÊ£ÄÊü•ÊÇ®ÁöÑÂÖ®Ë∫´ÂÅ•Â∫∑Áä∂ÂÜµ„ÄÇ",
                startBtn: "ÂºÄÂßãËá™Êµã",
                dentalHistoryTitle: "ÁâôÁßëÁóÖÂè≤",
                dentalHistoryDesc: "ËØ∑ÂëäÁü•ÊÇ®ËøáÂéªÁöÑÁâôÁßëÁªèÂéÜ„ÄÇ",
                q_extraction: "ÊÇ®ÊõæÁªèÊãîËøáÁâôÂêóÔºü",
                q_anesthesia: "ÊÇ®ÊõæÁªèÊé•ÂèóËøáÁâôÁßëÈ∫ªÈÜâÔºàÊ≥®Â∞ÑÔºâÂêóÔºü",
                q_allergy: "ÂΩìÊó∂ÂØπÈ∫ªÈÜâÂâÇÊúâËøáÊïèÂèçÂ∫îÂêóÔºü",
                q_allergy_detail: "Ëç®È∫ªÁñπ„ÄÅÂëºÂê∏Âõ∞Èöæ„ÄÅ‰ºëÂÖãÁ≠â",
                medHistoryTitle: "ÂÖ®Ë∫´ÂÅ•Â∫∑Áä∂ÂÜµ",
                medHistoryDesc: "ËØ∑ÂãæÈÄâÊâÄÊúâÈÄÇÁî®È°π„ÄÇ",
                yes: "ÊòØ",
                no: "Âê¶",
                yes_had: "ÊòØÁöÑÔºåÊúâËøá",
                placeholder_bp: "ÊÇ®Áü•ÈÅìÂΩìÂâçÁöÑË°ÄÂéãÂêóÔºü",
                placeholder_bs: "ÂΩìÂâçË°ÄÁ≥ñÁä∂ÊÄÅ",
                placeholder_infectious: "ËØ∑ÈÄâÊã©ÊâÄÊúâÈÄÇÁî®ÁöÑÁñæÁóÖ",
                q_hypertension: "ÊÇ®ÊúâÈ´òË°ÄÂéãÊàñÊ≠£Âú®ÊúçÁî®ÈôçÂéãËçØÂêóÔºü",
                d_hypertension: "Âç≥‰ΩøÊ≤°ÊúâÁ°ÆËØäÔºåËã•ÊÑüËßâË°ÄÂéãÈ´ò‰πüËØ∑ÂãæÈÄâ„ÄÇ",
                q_diabetes: "ÊÇ®ÊúâÁ≥ñÂ∞øÁóÖÊàñ‰ΩøÁî®ËÉ∞Â≤õÁ¥†/ËçØÁâ©ÂêóÔºü",
                d_diabetes: "Ëã•ÊÄÄÁñëÁ≥ñÂ∞øÁóÖÊàñÈúÄÊ£ÄÊü•Ë°ÄÁ≥ñËØ∑ÂãæÈÄâ„ÄÇ",
                q_anticoagulant: "ÊÇ®ÊúçÁî®Ë°ÄÊ∂≤Á®ÄÈáäÂâÇÔºàÈòøÂè∏ÂåπÊûó„ÄÅÂçéÊ≥ïÊûóÁ≠âÔºâÂêóÔºü",
                d_anticoagulant: "Áî®‰∫éÈ¢ÑÈò≤ÂøÉË°ÄÁÆ°ÁñæÁóÖÊàñ‰∏≠È£é„ÄÇ",
                q_bleeding: "ÊÇ®ÊòØÂê¶ÂÆπÊòìÂá∫Ë°ÄÊàñÊ≠¢Ë°ÄÂõ∞ÈöæÔºü",
                d_bleeding: "ÊãîÁâôÊàñÊâãÊúØÂêéÊ≠¢Ë°ÄÂõ∞ÈöæÂè≤„ÄÇ",
                q_osteoporosis: "ÊÇ®ÊúçÁî®È™®Ë¥®ÁñèÊùæËçØÁâ©ÊàñÊ≥®Â∞ÑËøáÂêóÔºü",
                d_osteoporosis: "ÂèåËÜ¶ÈÖ∏ÁõêÁ±ªËçØÁâ©ÊàñÊ≥®Â∞ÑÊ≤ªÁñóÂè≤„ÄÇ",
                q_infectious: "ÊÇ®Êúâ‰º†ÊüìÁóÖÔºàËÇùÁÇé„ÄÅÁªìÊ†∏ÁóÖÁ≠âÔºâÂêóÔºü",
                d_infectious: "‰∏∫‰∫ÜÂÆâÂÖ®ÔºåËØ∑Âä°ÂøÖÂëäÁü•„ÄÇ",
                q_endocarditis: "ÊúâÂøÉÂÜÖËÜúÁÇéÂè≤Êàñ‰∫∫Â∑•ÂøÉËÑèÁì£ËÜúÂêóÔºü",
                d_endocarditis: "ÂåÖÊã¨ÂÖàÂ§©ÊÄßÂøÉËÑèÁóÖ„ÄÇ",
                q_kidney: "Ê≠£Âú®ÈÄèÊûêÊàñÊúâ‰∏•ÈáçËÇùÁóÖÂêóÔºü",
                d_kidney: "ËÇùÁ°¨Âåñ„ÄÅÁªàÊú´ÊúüËÇæË°∞Á´≠Á≠â„ÄÇ",
                q_pregnancy: "ÊÇ®ÊÄÄÂ≠ïÊàñÂèØËÉΩÊÄÄÂ≠ï‰∫ÜÂêóÔºü",
                d_pregnancy: "ÂåÖÊã¨Âì∫‰π≥Êúü„ÄÇ",
                btn_next: "‰∏ã‰∏ÄÊ≠• (ÂÅ•Â∫∑Ê£ÄÊü•)",
                btn_result: "Êü•ÁúãÁªìÊûú",
                btn_reset: "ÈáçÁΩÆ",
                btn_print: "ÊâìÂç∞",
                result_patient: "ÊÇ£ËÄÖËßÜÂõæ",
                result_doctor: "ÂåªÁîüËßÜÂõæ",
                safe: "ÂèØ‰ª•Ê≤ªÁñó",
                caution: "ÈúÄË¶ÅÂí®ËØ¢",
                danger: "ÈúÄË¶ÅÊ≥®ÊÑè",
                msg_safe: "‰ªäÂ§©ÂèØ‰ª•Êé•ÂèóÈ¢ÑÂÆöÁöÑÊ≤ªÁñó„ÄÇ",
                msg_caution: "ÁªèÂåªÁîüÂí®ËØ¢ÂêéÂèØÂÆâÂÖ®ËøõË°åÊ≤ªÁñó„ÄÇ",
                msg_danger: "‰∏∫‰∫ÜÂÆâÂÖ®ÔºåÊ≤ªÁñóÂèØËÉΩ‰ºöÊé®Ëøü„ÄÇ",
                ai_title: "AI ÁâôÁßëÂí®ËØ¢",
                ai_desc: "ÂÖ≥‰∫éÊÇ®ÁöÑÁä∂ÂÜµÔºåÂ¶ÇÊúâÁñëÈóÆËØ∑ÊèêÈóÆ„ÄÇ",
                ai_placeholder: "ËØ∑ËæìÂÖ•ÈóÆÈ¢ò...",
                ai_btn: "ÊèêÈóÆ",
                items_checked: "Â∑≤ÈÄâÈ°πÁõÆ",
                none: "Êó†",
                other: "ÂÖ∂‰ªñ",
                input_other: "ËØ∑ËæìÂÖ•ÁñæÁóÖÂêçÁß∞"
            },
            ja: {
                title: "Ê≠ØÁßëÊ≤ªÁôÇÂâç„ÅÆÂÆâÂÖ®„ÉÅ„Çß„ÉÉ„ÇØ",
                subtitle: "ÂÆâÂÖ®„Å™Ë®∫ÁôÇ„ÅÆ„Åü„ÇÅ„Å´ÂÖ®Ë∫´„ÅÆÂÅ•Â∫∑Áä∂ÊÖã„ÇíÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ",
                startBtn: "Ë®∫Êñ≠„ÇíÈñãÂßã",
                dentalHistoryTitle: "Ê≠ØÁßëÊ≤ªÁôÇÊ≠¥",
                dentalHistoryDesc: "ÈÅéÂéª„ÅÆÊ≠ØÁßëÁµåÈ®ì„Å´„Å§„ÅÑ„Å¶Êïô„Åà„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                q_extraction: "ÈÅéÂéª„Å´Ê≠Ø„ÇíÊäú„ÅÑ„ÅüÔºàÊäúÊ≠ØÔºâÁµåÈ®ì„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü",
                q_anesthesia: "Ê≠ØÁßëÊ≤ªÁôÇ„ÅßÈ∫ªÈÖîÊ≥®Â∞Ñ„Çí„Åó„Åü„Åì„Å®„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü",
                q_allergy: "„Åù„ÅÆÈöõ„ÄÅÈ∫ªÈÖîËñ¨„Å´„Ç¢„É¨„É´„ÇÆ„ÉºÂèçÂøú„ÅØ„ÅÇ„Çä„Åæ„Åó„Åü„ÅãÔºü",
                q_allergy_detail: "„Åò„Çì„Åæ„Åó„Çì„ÄÅÂëºÂê∏Âõ∞Èõ£„ÄÅ„Ç∑„Éß„ÉÉ„ÇØ„Å™„Å©",
                medHistoryTitle: "ÂÖ®Ë∫´„ÅÆÂÅ•Â∫∑Áä∂ÊÖã",
                medHistoryDesc: "Ë©≤ÂΩì„Åô„ÇãÈ†ÖÁõÆ„Å´„ÉÅ„Çß„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                yes: "„ÅØ„ÅÑ",
                no: "„ÅÑ„ÅÑ„Åà",
                yes_had: "„ÅØ„ÅÑ„ÄÅ„ÅÇ„Çä„Åæ„Åó„Åü",
                placeholder_bp: "ÁèæÂú®„ÅÆË°ÄÂúß„Çí„ÅîÂ≠òÁü•„Åß„Åô„ÅãÔºü",
                placeholder_bs: "ÁèæÂú®„ÅÆË°ÄÁ≥ñÂÄ§„ÅÆÁä∂ÊÖã",
                placeholder_infectious: "Ë©≤ÂΩì„Åô„ÇãÁñæÊÇ£„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ",
                q_hypertension: "ÁèæÂú®„ÄÅÈ´òË°ÄÂúß„ÅÆË®∫Êñ≠„ÇíÂèó„Åë„Åü„Åã„ÄÅËñ¨„ÇíÊúçÁî®‰∏≠„Åß„Åô„ÅãÔºü",
                d_hypertension: "Ë®∫Êñ≠„Åå„Å™„Åè„Å¶„ÇÇË°ÄÂúß„ÅåÈ´ò„ÅÑ„Å®ÊÑü„Åò„ÇãÂ†¥Âêà„ÅØ„ÉÅ„Çß„ÉÉ„ÇØ„ÄÇ",
                q_diabetes: "Á≥ñÂ∞øÁóÖ„Åå„ÅÇ„Çã„ÄÅ„Åæ„Åü„ÅØ„Ç§„É≥„Çπ„É™„É≥/Ëñ¨„Çí‰ΩøÁî®‰∏≠„Åß„Åô„ÅãÔºü",
                d_diabetes: "Á≥ñÂ∞øÁóÖ„ÅÆÁñë„ÅÑ„Åå„ÅÇ„Çã„ÄÅ„Åæ„Åü„ÅØÊï∞ÂÄ§Á¢∫Ë™ç„ÅåÂøÖË¶Å„Å™Â†¥Âêà„ÄÇ",
                q_anticoagulant: "Ë°ÄÊ∂≤„Çí„Çµ„É©„Çµ„É©„Å´„Åô„ÇãËñ¨Ôºà„Ç¢„Çπ„Éî„É™„É≥Á≠âÔºâ„ÇíÈ£≤„Çì„Åß„ÅÑ„Åæ„Åô„ÅãÔºü",
                d_anticoagulant: "ÂøÉË°ÄÁÆ°ÁñæÊÇ£„ÄÅËÑ≥Âçí‰∏≠‰∫àÈò≤„ÅÆ„Åü„ÇÅ„ÄÇ",
                q_bleeding: "Âá∫Ë°Ä„Åó„ÇÑ„Åô„Åã„Å£„Åü„Çä„ÄÅË°Ä„ÅåÊ≠¢„Åæ„Çä„Å´„Åè„ÅÑ„Åß„Åô„ÅãÔºü",
                d_bleeding: "ÊäúÊ≠Ø„ÇÑÊâãË°ìÂæå„ÅÆÊ≠¢Ë°ÄÂõ∞Èõ£„ÅÆÁµåÈ®ì„ÄÇ",
                q_osteoporosis: "È™®Á≤óÈ¨ÜÁóá„ÅÆËñ¨„ÇíÊúçÁî®„ÄÅ„Åæ„Åü„ÅØÊ≥®Â∞Ñ„ÇíÂèó„Åë„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü",
                d_osteoporosis: "„Éì„Çπ„Éõ„Çπ„Éõ„Éç„Éº„ÉàÁ≥ªËñ¨Ââ§„ÅÆÊúçÁî®„Åæ„Åü„ÅØÊ≥®Â∞ÑÊ≠¥„ÄÇ",
                q_infectious: "ËÇùÁÇé„ÄÅÁµêÊ†∏„Å™„Å©„ÅÆÊÑüÊüìÁóá„Å´„Åã„Åã„Å£„Å¶„ÅÑ„Åæ„Åô„ÅãÔºü",
                d_infectious: "ÂÆâÂÖ®„ÅÆ„Åü„ÇÅ„ÄÅÂøÖ„Åö„ÅäÁü•„Çâ„Åõ„Åè„Å†„Åï„ÅÑ„ÄÇ",
                q_endocarditis: "ÂøÉÂÜÖËÜúÁÇé„ÅÆÊó¢ÂæÄ„ÇÑ‰∫∫Â∑•ÂøÉËáìÂºÅ„ÅÆÊâãË°ìÊ≠¥„ÅØ„ÅÇ„Çä„Åæ„Åô„ÅãÔºü",
                d_endocarditis: "ÂÖàÂ§©ÊÄßÂøÉÁñæÊÇ£„ÇíÂê´„ÇÄ„ÄÇ",
                q_kidney: "ÈÄèÊûê‰∏≠„ÄÅ„Åæ„Åü„ÅØÈáçÂ∫¶„ÅÆËÇùÁñæÊÇ£„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü",
                d_kidney: "ËÇùÁ°¨Â§â„ÄÅÊú´ÊúüËÖé‰∏çÂÖ®„Å™„Å©„ÄÇ",
                q_pregnancy: "ÁèæÂú®Â¶äÂ®†‰∏≠„ÄÅ„Åæ„Åü„ÅØÂ¶äÂ®†„ÅÆÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÅãÔºü",
                d_pregnancy: "Êéà‰π≥‰∏≠„ÇÇÂê´„ÇÄ„ÄÇ",
                btn_next: "Ê¨°„Å∏ (ÂÅ•Â∫∑„ÉÅ„Çß„ÉÉ„ÇØ)",
                btn_result: "ÁµêÊûú„ÇíÁ¢∫Ë™ç",
                btn_reset: "ÊúÄÂàù„Å´Êàª„Çã",
                btn_print: "Âç∞Âà∑",
                result_patient: "ÊÇ£ËÄÖÁî®ÁµêÊûú",
                result_doctor: "ÂåªÁôÇËÄÖÁî®Ë©≥Á¥∞",
                safe: "Ë®∫ÁôÇÂèØËÉΩ",
                caution: "Áõ∏Ë´á„ÅåÂøÖË¶Å",
                danger: "Ê≥®ÊÑè„ÅåÂøÖË¶Å",
                msg_safe: "Êú¨Êó•‰∫àÂÆö„Åï„Çå„Å¶„ÅÑ„ÇãÊ≤ªÁôÇ„ÇíÂèó„Åë„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ",
                msg_caution: "ÂåªÂ∏´„Å®„ÅÆÁõ∏Ë´áÂæå„ÄÅÂÆâÂÖ®„Å´Ê≤ªÁôÇ„ÇíÈÄ≤„ÇÅ„Çâ„Çå„Åæ„Åô„ÄÇ",
                msg_danger: "ÂÆâÂÖ®„ÅÆ„Åü„ÇÅ„ÄÅÊú¨Êó•„ÅÆÊ≤ªÁôÇ„ÅØÂª∂Êúü„Åï„Çå„ÇãÂèØËÉΩÊÄß„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ",
                ai_title: "AI Ê≠ØÁßëÁõ∏Ë´á",
                ai_desc: "„ÅîËá™Ë∫´„ÅÆÁä∂ÊÖã„Å´„Å§„ÅÑ„Å¶Ë≥™Âïè„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                ai_placeholder: "Ë≥™Âïè„ÇíÂÖ•Âäõ...",
                ai_btn: "Ë≥™Âïè",
                items_checked: "„ÉÅ„Çß„ÉÉ„ÇØ„Åó„ÅüÈ†ÖÁõÆ",
                none: "Áâπ„Å´„Å™„Åó",
                other: "„Åù„ÅÆ‰ªñ",
                input_other: "ÁñæÊÇ£Âêç„ÇíÂÖ•Âäõ"
            },
            vi: {
                title: "Ki·ªÉm tra an to√†n nha khoa",
                subtitle: "Ki·ªÉm tra s·ª©c kh·ªèe to√†n th√¢n ƒë·ªÉ ƒëi·ªÅu tr·ªã an to√†n.",
                startBtn: "B·∫Øt ƒë·∫ßu",
                dentalHistoryTitle: "L·ªãch s·ª≠ Nha khoa",
                dentalHistoryDesc: "Vui l√≤ng cho bi·∫øt kinh nghi·ªám nha khoa tr∆∞·ªõc ƒë√¢y.",
                q_extraction: "B·∫°n ƒë√£ t·ª´ng nh·ªï rƒÉng ch∆∞a?",
                q_anesthesia: "B·∫°n ƒë√£ t·ª´ng ti√™m thu·ªëc t√™ nha khoa ch∆∞a?",
                q_allergy: "B·∫°n c√≥ b·ªã d·ªã ·ª©ng v·ªõi thu·ªëc t√™ kh√¥ng?",
                q_allergy_detail: "N·ªïi m·ªÅ ƒëay, kh√≥ th·ªü, s·ªëc, v.v.",
                medHistoryTitle: "T√¨nh tr·∫°ng s·ª©c kh·ªèe",
                medHistoryDesc: "Vui l√≤ng ch·ªçn c√°c m·ª•c ph√π h·ª£p.",
                yes: "C√≥",
                no: "Kh√¥ng",
                yes_had: "V√¢ng, ƒë√£ t·ª´ng",
                placeholder_bp: "B·∫°n c√≥ bi·∫øt huy·∫øt √°p hi·ªán t·∫°i kh√¥ng?",
                placeholder_bs: "T√¨nh tr·∫°ng ƒë∆∞·ªùng huy·∫øt hi·ªán t·∫°i",
                placeholder_infectious: "Ch·ªçn t·∫•t c·∫£ c√°c b·ªánh m·∫Øc ph·∫£i",
                q_hypertension: "B·∫°n c√≥ b·ªã cao huy·∫øt √°p ho·∫∑c ƒëang u·ªëng thu·ªëc kh√¥ng?",
                d_hypertension: "Ch·ªçn n·∫øu b·∫°n c·∫£m th·∫•y huy·∫øt √°p cao d√π ch∆∞a ch·∫©n ƒëo√°n.",
                q_diabetes: "B·∫°n c√≥ b·ªã ti·ªÉu ƒë∆∞·ªùng ho·∫∑c d√πng insulin/thu·ªëc kh√¥ng?",
                d_diabetes: "Ch·ªçn n·∫øu nghi ng·ªù ti·ªÉu ƒë∆∞·ªùng.",
                q_anticoagulant: "B·∫°n c√≥ u·ªëng thu·ªëc l√†m lo√£ng m√°u (Aspirin, v.v.) kh√¥ng?",
                d_anticoagulant: "Ph√≤ng ng·ª´a b·ªánh tim m·∫°ch, ƒë·ªôt qu·ªµ.",
                q_bleeding: "B·∫°n c√≥ d·ªÖ b·ªã ch·∫£y m√°u ho·∫∑c kh√≥ c·∫ßm m√°u kh√¥ng?",
                d_bleeding: "Ti·ªÅn s·ª≠ kh√≥ c·∫ßm m√°u sau nh·ªï rƒÉng/ph·∫´u thu·∫≠t.",
                q_osteoporosis: "B·∫°n c√≥ u·ªëng thu·ªëc ho·∫∑c ti√™m thu·ªëc lo√£ng x∆∞∆°ng kh√¥ng?",
                d_osteoporosis: "Thu·ªëc Bisphosphonate ho·∫∑c ti√™m.",
                q_infectious: "B·∫°n c√≥ m·∫Øc b·ªánh truy·ªÅn nhi·ªÖm (Vi√™m gan, Lao, v.v.) kh√¥ng?",
                d_infectious: "Vui l√≤ng th√¥ng b√°o ƒë·ªÉ ƒë·∫£m b·∫£o an to√†n.",
                q_endocarditis: "Ti·ªÅn s·ª≠ vi√™m n·ªôi t√¢m m·∫°c ho·∫∑c van tim nh√¢n t·∫°o?",
                d_endocarditis: "Bao g·ªìm b·ªánh tim b·∫©m sinh.",
                q_kidney: "ƒêang ch·∫°y th·∫≠n ho·∫∑c b·ªánh gan n·∫∑ng?",
                d_kidney: "X∆° gan, suy th·∫≠n giai ƒëo·∫°n cu·ªëi, v.v.",
                q_pregnancy: "B·∫°n ƒëang mang thai ho·∫∑c c√≥ kh·∫£ nƒÉng mang thai?",
                d_pregnancy: "Bao g·ªìm ƒëang cho con b√∫.",
                btn_next: "Ti·∫øp theo (Ki·ªÉm tra y t·∫ø)",
                btn_result: "Xem k·∫øt qu·∫£",
                btn_reset: "L√†m l·∫°i",
                btn_print: "In",
                result_patient: "K·∫øt qu·∫£ (B·ªánh nh√¢n)",
                result_doctor: "Chi ti·∫øt (B√°c sƒ©)",
                safe: "C√≥ th·ªÉ ƒëi·ªÅu tr·ªã",
                caution: "C·∫ßn t∆∞ v·∫•n",
                danger: "C·∫ßn ch√∫ √Ω",
                msg_safe: "B·∫°n c√≥ th·ªÉ ƒëi·ªÅu tr·ªã theo k·∫ø ho·∫°ch h√¥m nay.",
                msg_caution: "C√≥ th·ªÉ ƒëi·ªÅu tr·ªã an to√†n sau khi t∆∞ v·∫•n.",
                msg_danger: "ƒêi·ªÅu tr·ªã c√≥ th·ªÉ b·ªã ho√£n v√¨ l√Ω do an to√†n.",
                ai_title: "Tr·ª£ l√Ω AI Nha khoa",
                ai_desc: "ƒê·∫∑t c√¢u h·ªèi v·ªÅ t√¨nh tr·∫°ng c·ªßa b·∫°n.",
                ai_placeholder: "Nh·∫≠p c√¢u h·ªèi...",
                ai_btn: "H·ªèi",
                items_checked: "C√°c m·ª•c ƒë√£ ch·ªçn",
                none: "Kh√¥ng c√≥",
                other: "Kh√°c",
                input_other: "Nh·∫≠p t√™n b·ªánh"
            }
        };

        const QUESTIONS = [
            { id: 'hypertension', key: 'q_hypertension', detailKey: 'd_hypertension', category: 'cardio', hasInputs: true },
            { id: 'diabetes', key: 'q_diabetes', detailKey: 'd_diabetes', category: 'endocrine', hasInputs: true },
            { id: 'anticoagulant', key: 'q_anticoagulant', detailKey: 'd_anticoagulant', category: 'medication' },
            { id: 'bleeding_tendency', key: 'q_bleeding', detailKey: 'd_bleeding', category: 'medication' },
            { id: 'osteoporosis', key: 'q_osteoporosis', detailKey: 'd_osteoporosis', category: 'medication' },
            { id: 'infectious', key: 'q_infectious', detailKey: 'd_infectious', category: 'other', hasInputs: true },
            { id: 'endocarditis', key: 'q_endocarditis', detailKey: 'd_endocarditis', category: 'cardio' },
            { id: 'kidney_liver', key: 'q_kidney', detailKey: 'd_kidney', category: 'organ' },
            { id: 'pregnancy', key: 'q_pregnancy', detailKey: 'd_pregnancy', category: 'other' }
        ];

        // Logic remains largely same, generating KOREAN doctor notes.
        const analyzeCondition = (answers, lang) => {
            let status = 'safe'; 
            let patientMessage = TRANSLATIONS[lang].msg_safe;
            let doctorNotes = [];
            let riskLevel = 0;
            const t = TRANSLATIONS[lang];

            // 0. Dental History
            if (answers.dental_anesthesia_allergy) {
                status = 'danger';
                patientMessage = lang === 'ko' ? 'ÎßàÏ∑®Ï†ú ÏïåÎü¨ÏßÄÍ∞Ä ÏûàÏñ¥ ÏùòÎ£åÏßÑ ÌôïÏù∏Ïù¥ ÌïÑÏöîÌï©ÎãàÎã§.' : t.msg_danger;
                doctorNotes.push({ type: 'critical', title: 'Î¶¨ÎèÑÏπ¥Ïù∏ ÏïåÎü¨ÏßÄ (Lidocaine Allergy)', content: 'ÌôòÏûê ÏßÑÏà† ÏÉÅ Íµ≠ÏÜåÎßàÏ∑®Ï†ú ÏïåÎü¨ÏßÄ Î≥¥Ïú†. Î¶¨ÎèÑÏπ¥Ïù∏ ÏÇ¨Ïö© Í∏àÍ∏∞. ÎåÄÏ≤¥ ÏïΩÎ¨º/ÌÖåÏä§Ìä∏ ÌïÑÏöî.' });
            }
            if (answers.dental_extraction || answers.dental_anesthesia) {
                const hx = [];
                if (answers.dental_extraction) hx.push('Î∞úÏπò Í≤ΩÌóò(+)');
                if (answers.dental_anesthesia) hx.push('ÎßàÏ∑® Í≤ΩÌóò(+)');
                doctorNotes.push({ type: 'monitor', title: 'ÏπòÍ≥º ÏßÑÎ£å Ïù¥Î†• (Dental History)', content: hx.join(', ') + '.' });
            }

            // 1. Hypertension
            if (answers.hypertension) {
                riskLevel += 1;
                const sys = parseInt(answers.bp_sys), dia = parseInt(answers.bp_dia);
                let bpNote = 'ÏßÑÎ£å Ï†Ñ ÌòàÏïï Ïû¨ÌôïÏù∏ ÌïÑÏàò.';
                let bpStatus = 'monitor';
                if (sys || dia) {
                    bpNote = `ÌôòÏûê ÏûêÍ∞Ä Ï∏°Ï†ï: ${sys||'?'} / ${dia||'?'} mmHg. `;
                    if (sys >= 160 || dia >= 100) {
                        bpStatus = 'danger'; status = 'danger'; bpNote += 'Stage 2 HTN. ÏùëÍ∏â Ïô∏ Ïó∞Í∏∞ Í∂åÍ≥†.';
                        patientMessage = t.msg_danger;
                    } else if (sys >= 140 || dia >= 90) {
                        bpStatus = 'warning'; if (status !== 'danger') status = 'caution'; bpNote += 'Stage 1 HTN. Î™®ÎãàÌÑ∞ÎßÅ ÌïÑÏàò.';
                        if (status !== 'danger') patientMessage = t.msg_caution;
                    } else { bpNote += 'Controlled.'; }
                } else { bpNote += ' 160/100‚Üë Ïó∞Í∏∞ Í≥†Î†§. Epi 2 ample Ïù¥Ìïò.'; }
                doctorNotes.push({type: bpStatus, title: 'Í≥†ÌòàÏïï (Hypertension)', content: bpNote});
            }
            
            // 2. Diabetes
            if (answers.diabetes) {
                riskLevel += 1;
                const bsl = parseInt(answers.bs_level), isHigh = answers.bs_high_symptom, isLow = answers.bs_low_symptom;
                let dmNote = 'Ï†ÄÌòàÎãπ ÏáºÌÅ¨ Ï£ºÏùò.';
                let dmStatus = 'monitor';
                if (bsl || isHigh || isLow) {
                    if (bsl) dmNote = `ÏûêÍ∞Ä ÌòàÎãπ: ${bsl} mg/dL. `; else dmNote = '';
                    if ((bsl >= 200) || isHigh) {
                        dmStatus = 'warning'; if (status !== 'danger') status = 'caution'; dmNote += 'Í≥†ÌòàÎãπ(>200). Í∞êÏóº/ÏπòÏú†ÏßÄÏó∞ Ï£ºÏùò.';
                        if (status !== 'danger') patientMessage = t.msg_caution;
                    } else if ((bsl > 0 && bsl < 70) || isLow) {
                        dmStatus = 'danger'; status = 'danger'; dmNote += 'Ï†ÄÌòàÎãπ(<70) ÏúÑÌóò. Glucose Í≥µÍ∏â.';
                        patientMessage = t.msg_danger;
                    } else if (bsl) dmNote += 'Controlled.';
                }
                doctorNotes.push({type: dmStatus, title: 'ÎãπÎá® (Diabetes)', content: dmNote});
            }

            // 3. Anticoagulant
            if (answers.anticoagulant) {
                if(status !== 'danger') status = 'caution';
                patientMessage = t.msg_caution;
                doctorNotes.push({type: 'warning', title: 'Ìï≠ÌòàÏ†ÑÏ†ú Î≥µÏö©', content: 'Î∞úÏπò Ïãú Ï§ëÎã® Î∂àÌïÑÏöî(ÏùºÎ∞òÏ†Å). ÏôÄÌååÎ¶∞ INR ÌôïÏù∏. ÏßÄÌòàÏ†ú Ï§ÄÎπÑ.'});
            }

            // 4. Bleeding
            if (answers.bleeding_tendency) {
                status = 'danger';
                patientMessage = t.msg_danger;
                doctorNotes.push({type: 'critical', title: 'Ï∂úÌòà ÏÜåÏù∏ (Bleeding Diathesis)', content: 'ÏßÄÌòà ÏßÄÏó∞ Î≥ëÎ†•. ÌòàÏï°Í≤ÄÏÇ¨(PT/aPTT) ÌôïÏù∏ Ï†Ñ Ïπ®ÏäµÏ†Å ÏπòÎ£å Í∏àÍ∏∞.'});
            }

            // 5. Osteoporosis
            if (answers.osteoporosis) {
                if(status !== 'danger') status = 'caution';
                patientMessage = t.msg_caution;
                doctorNotes.push({type: 'danger', title: 'Í≥®Îã§Í≥µÏ¶ù ÏïΩÎ¨º (MRONJ)', content: 'ÏïΩÎ¨º Ï†úÌòï/Í∏∞Í∞Ñ ÌôïÏù∏. Ìú¥ÏïΩÍ∏∞ ÌòëÏßÑ.'});
            }

            // 6. Infectious
            if (answers.infectious) {
                riskLevel += 1;
                if (status === 'safe') status = 'caution';
                let infDetails = [];
                if (answers.infectious_hbv) infDetails.push("HBV");
                if (answers.infectious_hcv) infDetails.push("HCV");
                if (answers.infectious_tb) infDetails.push("TB");
                if (answers.infectious_hiv) infDetails.push("HIV");
                if (answers.infectious_other) infDetails.push(`Í∏∞ÌÉÄ(${answers.infectious_other_text || '?'})`);
                
                let infNote = `Í∞êÏóºÏÑ± ÏßàÌôò: ${infDetails.join(', ') || 'ÎØ∏ÏÑ†ÌÉù'}. `;
                if (answers.infectious_tb) {
                    status = 'danger'; infNote += '[Í≤∞Ìïµ] ÌôúÎèôÏÑ± ÌôïÏù∏ ÌïÑÏàò(Í≥µÍ∏∞ Ï†ÑÌåå). ';
                    patientMessage = t.msg_danger;
                }
                infNote += 'Standard Precaution Ï§ÄÏàò.';
                doctorNotes.push({ type: answers.infectious_tb ? 'danger' : 'warning', title: 'Í∞êÏóºÏÑ± ÏßàÌôò', content: infNote });
            }

            // 7. Endocarditis
            if (answers.endocarditis) {
                status = 'danger';
                patientMessage = t.msg_danger;
                doctorNotes.push({type: 'critical', title: 'Í∞êÏóºÏÑ± Ïã¨ÎÇ¥ÎßâÏóº Í≥†ÏúÑÌóò', content: 'ÏòàÎ∞©Ï†Å Ìï≠ÏÉùÏ†ú(Amoxicillin 2g) ÌïÑÏàò.'});
            }

            // 8. Kidney/Liver
            if (answers.kidney_liver) {
                status = 'danger';
                patientMessage = t.msg_danger;
                doctorNotes.push({type: 'warning', title: 'Ïã†Ïû•/Í∞Ñ Í∏∞Îä• Ï†ÄÌïò', content: 'ÏïΩÎ¨º ÎåÄÏÇ¨/ÏßÄÌòà Ï£ºÏùò. Ìà¨ÏÑù ÏùºÏ†ï ÌôïÏù∏.'});
            }

            // 9. Pregnancy
            if (answers.pregnancy) {
                if(status !== 'danger') status = 'caution';
                patientMessage = t.msg_caution;
                doctorNotes.push({type: 'monitor', title: 'ÏûÑÏã†Î∂Ä', content: '2Í∏∞ ÏïàÏ†Ñ. Î∞©ÏÇ¨ÏÑ† ÎÇ©Î≥µ. ÏïΩÎ¨º Í∏àÍ∏∞ ÌôïÏù∏.'});
            }

            if (status === 'safe' && riskLevel > 0) status = 'caution';
            
            return { status, patientMessage, doctorNotes, riskLevel };
        };

        // --- AI Helper ---
        async function callGemini(systemPrompt, userPrompt, key) {
            if (!key) throw new Error("API Key Missing");
            const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${key}`;
            const payload = { contents: [{ parts: [{ text: userPrompt }] }], systemInstruction: { parts: [{ text: systemPrompt }] } };
            const res = await fetch(url, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(payload) });
            if (!res.ok) throw new Error("API Error");
            const data = await res.json();
            return data.candidates?.[0]?.content?.parts?.[0]?.text || "No response.";
        }

        // --- Components ---
        function DentalScreeningApp() {
            const [lang, setLang] = useState('ko');
            const [step, setStep] = useState('lang_select'); // lang_select, intro, dental_history, survey, result
            const [answers, setAnswers] = useState({});
            const [viewMode, setViewMode] = useState('patient');
            
            const [localApiKey, setLocalApiKey] = useState(apiKey || localStorage.getItem('gemini_api_key') || '');
            const [showSettings, setShowSettings] = useState(false);
            const [aiLoading, setAiLoading] = useState(false);
            const [aiResult, setAiResult] = useState('');
            const [patientQuestion, setPatientQuestion] = useState('');
            const [aiError, setAiError] = useState('');

            const t = TRANSLATIONS[lang];

            const handleAnswer = (id, value) => {
                setAnswers(prev => {
                    const next = { ...prev, [id]: value };
                    if (!value) {
                         // cleanup sub-answers
                        if (id === 'hypertension') { delete next.bp_sys; delete next.bp_dia; }
                        if (id === 'diabetes') { delete next.bs_level; delete next.bs_high_symptom; delete next.bs_low_symptom; }
                        if (id === 'infectious') { delete next.infectious_hbv; delete next.infectious_hcv; delete next.infectious_tb; delete next.infectious_hiv; delete next.infectious_other; delete next.infectious_other_text; }
                        if (id === 'dental_anesthesia') { delete next.dental_anesthesia_allergy; }
                    }
                    return next;
                });
            };

            const handleValueChange = (key, value) => setAnswers(prev => ({ ...prev, [key]: value }));
            const resetApp = () => { setAnswers({}); setStep('lang_select'); setViewMode('patient'); setAiResult(''); setPatientQuestion(''); };
            const result = useMemo(() => analyzeCondition(answers, lang), [answers, lang]);

            // Add handleNext Definition
            const handleNext = () => setStep('result');

            // Validation
            const dentalAnswered = answers.dental_extraction !== undefined && answers.dental_anesthesia !== undefined && (answers.dental_anesthesia === false || answers.dental_anesthesia_allergy !== undefined);
            const medicalAnswered = QUESTIONS.every(q => answers[q.id] !== undefined);

            // AI Features
            const askPatientAI = async () => {
                if (!patientQuestion.trim()) return;
                if (!localApiKey) { setShowSettings(true); return; }
                setAiLoading(true); setAiResult(''); setAiError('');
                
                const conditionSummary = QUESTIONS.filter(q => answers[q.id]).map(q => t[q.key]).join(", ");
                const sysPrompt = `
                    You are a helpful Dental Receptionist AI. 
                    Current Language: ${lang} (${{ko:'Korean',en:'English',zh:'Chinese',ja:'Japanese',vi:'Vietnamese'}[lang]}).
                    Patient's Conditions: ${conditionSummary || 'None'}.
                    Risk Status: ${result.status}.
                    
                    Goal: Answer in ${lang}. Be polite, empathetic, and simple.
                    Disclaimer: Advise checking with the dentist.
                `;
                try {
                    const text = await callGemini(sysPrompt, patientQuestion, localApiKey);
                    setAiResult(text);
                } catch (e) { setAiError("API Error"); } finally { setAiLoading(false); }
            };

            const generateReferralLetter = async () => {
                if (!localApiKey) { setShowSettings(true); return; }
                setAiLoading(true); setAiResult('');
                const sysPrompt = `
                    You are a Dentist. Write a formal referral letter (ÏßÑÎ£å ÏùòÎ¢∞ÏÑú) in Korean to a Physician.
                    Patient Risks: ${JSON.stringify(result.doctorNotes)}.
                `;
                try {
                    const text = await callGemini(sysPrompt, "Write Letter", localApiKey);
                    setAiResult(text);
                } catch (e) { setAiError("API Error"); } finally { setAiLoading(false); }
            };

            const fontClass = lang === 'zh' ? 'lang-sc' : lang === 'ja' ? 'lang-jp' : '';

            return (
                <div className={`min-h-screen bg-slate-50 flex justify-center ${fontClass}`}>
                    <div className="w-full max-w-md bg-white min-h-screen shadow-xl overflow-hidden flex flex-col relative">
                        
                        {/* API Settings */}
                        {showSettings && (
                            <div className="absolute inset-0 bg-black/50 z-50 flex items-center justify-center p-4">
                                <div className="bg-white p-6 rounded-xl w-full max-w-sm">
                                    <h3 className="font-bold mb-2">API Key</h3>
                                    <input type="password" value={localApiKey} onChange={e=>setLocalApiKey(e.target.value)} className="w-full p-2 border rounded mb-4"/>
                                    <button onClick={()=>setShowSettings(false)} className="w-full bg-blue-600 text-white py-2 rounded">Save</button>
                                </div>
                            </div>
                        )}

                        {/* Header */}
                        {step !== 'lang_select' && (
                            <header className="bg-blue-600 text-white p-4 flex items-center justify-between shadow-md z-10 no-print">
                                <div className="flex items-center gap-2">
                                    <Icons.Stethoscope className="h-6 w-6" />
                                    <h1 className="text-lg font-bold">Dental Safe Check</h1>
                                </div>
                                <div className="flex gap-2 items-center">
                                    {step === 'result' && <button onClick={()=>window.print()}><Icons.Printer size={20}/></button>}
                                    <button onClick={resetApp}><Icons.RefreshCcw size={20}/></button>
                                    <button onClick={()=>setShowSettings(!showSettings)}><Icons.Settings size={20}/></button>
                                </div>
                            </header>
                        )}

                        <main className="flex-1 overflow-y-auto p-4">
                            
                            {/* STEP 0: Language Select */}
                            {step === 'lang_select' && (
                                <div className="flex flex-col items-center justify-center h-full space-y-8 animate-fadeIn">
                                    <div className="text-center">
                                        <div className="inline-block p-4 bg-blue-50 rounded-full mb-4">
                                            <Icons.Globe className="w-16 h-16 text-blue-600" />
                                        </div>
                                        <h2 className="text-2xl font-bold text-slate-800">Select Language</h2>
                                        <p className="text-slate-500">Ïñ∏Ïñ¥Î•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</p>
                                    </div>
                                    <div className="grid grid-cols-1 gap-3 w-full px-8">
                                        <button onClick={()=>{setLang('ko'); setStep('intro');}} className="py-4 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 font-bold text-lg transition">üá∞üá∑ ÌïúÍµ≠Ïñ¥</button>
                                        <button onClick={()=>{setLang('en'); setStep('intro');}} className="py-4 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 font-bold text-lg transition">üá∫üá∏ English</button>
                                        <button onClick={()=>{setLang('zh'); setStep('intro');}} className="py-4 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 font-bold text-lg transition">üá®üá≥ ‰∏≠Êñá (Mandarin)</button>
                                        <button onClick={()=>{setLang('ja'); setStep('intro');}} className="py-4 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 font-bold text-lg transition">üáØüáµ Êó•Êú¨Ë™û</button>
                                        <button onClick={()=>{setLang('vi'); setStep('intro');}} className="py-4 border-2 border-slate-100 rounded-xl hover:border-blue-500 hover:bg-blue-50 font-bold text-lg transition">üáªüá≥ Ti·∫øng Vi·ªát</button>
                                    </div>
                                </div>
                            )}

                            {/* STEP 1: Intro */}
                            {step === 'intro' && (
                                <div className="flex flex-col items-center justify-center h-full text-center space-y-6 animate-fadeIn">
                                    <div className="bg-blue-50 p-6 rounded-full relative"><Icons.ShieldAlert className="h-20 w-20 text-blue-600" /></div>
                                    <div>
                                        <h2 className="text-2xl font-bold text-slate-800 mb-2">{t.title}</h2>
                                        <p className="text-slate-500">{t.subtitle}</p>
                                    </div>
                                    <button onClick={() => setStep('dental_history')} className="w-full bg-blue-600 text-white py-4 rounded-xl font-bold text-lg shadow-lg hover:bg-blue-700 active:scale-95 transition">
                                        {t.startBtn}
                                    </button>
                                </div>
                            )}

                            {/* STEP 2: Dental History */}
                            {step === 'dental_history' && (
                                <div className="space-y-6 pb-20 animate-fadeIn">
                                    <div className="bg-blue-50 border-l-4 border-blue-400 p-4 rounded text-sm text-blue-800 mb-4 flex items-center gap-2">
                                        <Icons.Tooth size={18} /> <strong>{t.dentalHistoryTitle}</strong>
                                    </div>
                                    <div className="bg-white border rounded-xl p-5 shadow-sm">
                                        <h3 className="font-bold text-lg">{t.q_extraction}</h3>
                                        <div className="grid grid-cols-2 gap-3 mt-4">
                                            <button onClick={()=>handleAnswer('dental_extraction', true)} className={`py-3 rounded-lg font-semibold ${answers.dental_extraction===true?'bg-blue-600 text-white':'bg-slate-100'}`}>{t.yes}</button>
                                            <button onClick={()=>handleAnswer('dental_extraction', false)} className={`py-3 rounded-lg font-semibold ${answers.dental_extraction===false?'bg-slate-600 text-white':'bg-slate-100'}`}>{t.no}</button>
                                        </div>
                                    </div>
                                    <div className="bg-white border rounded-xl p-5 shadow-sm">
                                        <h3 className="font-bold text-lg">{t.q_anesthesia}</h3>
                                        <div className="grid grid-cols-2 gap-3 mt-4">
                                            <button onClick={()=>handleAnswer('dental_anesthesia', true)} className={`py-3 rounded-lg font-semibold ${answers.dental_anesthesia===true?'bg-blue-600 text-white':'bg-slate-100'}`}>{t.yes}</button>
                                            <button onClick={()=>handleAnswer('dental_anesthesia', false)} className={`py-3 rounded-lg font-semibold ${answers.dental_anesthesia===false?'bg-slate-600 text-white':'bg-slate-100'}`}>{t.no}</button>
                                        </div>
                                        {answers.dental_anesthesia && (
                                            <div className="mt-4 pt-4 border-t animate-fadeIn">
                                                <h3 className="font-bold text-lg text-red-600">{t.q_allergy}</h3>
                                                <p className="text-xs text-slate-500">{t.q_allergy_detail}</p>
                                                <div className="grid grid-cols-2 gap-3 mt-4">
                                                    <button onClick={()=>handleAnswer('dental_anesthesia_allergy', true)} className={`py-3 rounded-lg font-semibold ${answers.dental_anesthesia_allergy===true?'bg-red-600 text-white':'bg-slate-100'}`}>{t.yes_had}</button>
                                                    <button onClick={()=>handleAnswer('dental_anesthesia_allergy', false)} className={`py-3 rounded-lg font-semibold ${answers.dental_anesthesia_allergy===false?'bg-slate-600 text-white':'bg-slate-100'}`}>{t.no}</button>
                                                </div>
                                            </div>
                                        )}
                                    </div>
                                </div>
                            )}

                            {/* STEP 3: Medical Survey */}
                            {step === 'survey' && (
                                <div className="space-y-6 pb-20 animate-fadeIn">
                                    <div className="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded text-sm text-yellow-800 mb-4">
                                        {t.medHistoryTitle}: {t.medHistoryDesc}
                                    </div>
                                    {QUESTIONS.map(q => (
                                        <div key={q.id} className="bg-white border rounded-xl p-5 shadow-sm">
                                            <div className="flex gap-3 mb-3">
                                                {q.category==='cardio'?<Icons.HeartPulse className="text-red-500 shrink-0"/>:
                                                 q.category==='medication'?<Icons.Pill className="text-green-500 shrink-0"/>:
                                                 q.category==='endocrine'?<Icons.Activity className="text-orange-500 shrink-0"/>:
                                                 <Icons.Syringe className="text-purple-500 shrink-0"/>}
                                                <div>
                                                    <h3 className="font-bold text-lg">{t[q.key]}</h3>
                                                    <p className="text-xs text-slate-400">{t[q.detailKey]}</p>
                                                </div>
                                            </div>
                                            <div className="grid grid-cols-2 gap-3 mt-4">
                                                <button onClick={()=>handleAnswer(q.id, true)} className={`py-3 rounded-lg font-semibold ${answers[q.id]===true?'bg-blue-600 text-white':'bg-slate-100'}`}>{t.yes}</button>
                                                <button onClick={()=>handleAnswer(q.id, false)} className={`py-3 rounded-lg font-semibold ${answers[q.id]===false?'bg-slate-600 text-white':'bg-slate-100'}`}>{t.no}</button>
                                            </div>
                                            
                                            {/* Sub Inputs */}
                                            {answers[q.id] && q.id === 'hypertension' && (
                                                <div className="mt-4 pt-4 border-t border-dashed">
                                                    <p className="text-sm font-bold text-blue-800 mb-2">{t.placeholder_bp}</p>
                                                    <div className="flex gap-2">
                                                        <input type="number" placeholder="120" value={answers.bp_sys||''} onChange={e=>handleValueChange('bp_sys',e.target.value)} className="w-full p-2 border rounded text-center"/>
                                                        <span className="text-xl">/</span>
                                                        <input type="number" placeholder="80" value={answers.bp_dia||''} onChange={e=>handleValueChange('bp_dia',e.target.value)} className="w-full p-2 border rounded text-center"/>
                                                    </div>
                                                </div>
                                            )}
                                            {answers[q.id] && q.id === 'diabetes' && (
                                                <div className="mt-4 pt-4 border-t border-dashed">
                                                    <p className="text-sm font-bold text-orange-800 mb-2">{t.placeholder_bs}</p>
                                                    <input type="number" placeholder="mg/dL" value={answers.bs_level||''} onChange={e=>handleValueChange('bs_level',e.target.value)} className="w-full p-2 border rounded mb-2"/>
                                                    <div className="grid grid-cols-2 gap-2">
                                                        <button onClick={()=>handleValueChange('bs_high_symptom',!answers.bs_high_symptom)} className={`p-2 border rounded text-sm ${answers.bs_high_symptom?'bg-orange-100 border-orange-500':''}`}>High Sugar Symptom</button>
                                                        <button onClick={()=>handleValueChange('bs_low_symptom',!answers.bs_low_symptom)} className={`p-2 border rounded text-sm ${answers.bs_low_symptom?'bg-red-100 border-red-500':''}`}>Low Sugar Symptom</button>
                                                    </div>
                                                </div>
                                            )}
                                            {answers[q.id] && q.id === 'infectious' && (
                                                <div className="mt-4 pt-4 border-t border-dashed">
                                                    <p className="text-sm font-bold text-orange-800 mb-2">{t.placeholder_infectious}</p>
                                                    <div className="space-y-2">
                                                        {['hbv','hcv','tb','hiv','other'].map(k => (
                                                            <div key={k}>
                                                                <label className="flex items-center gap-2 p-2 border rounded hover:bg-slate-50">
                                                                    <input type="checkbox" checked={answers[`infectious_${k}`]||false} onChange={e=>handleValueChange(`infectious_${k}`,e.target.checked)} className="w-5 h-5"/>
                                                                    <span>{k==='hbv'?'HBV':k==='hcv'?'HCV':k==='tb'?'TB':k==='hiv'?'HIV':t.other}</span>
                                                                </label>
                                                                {k==='other' && answers.infectious_other && (
                                                                    <input type="text" placeholder={t.input_other} value={answers.infectious_other_text||''} onChange={e=>handleValueChange('infectious_other_text',e.target.value)} className="w-full mt-2 p-2 border rounded text-sm"/>
                                                                )}
                                                            </div>
                                                        ))}
                                                    </div>
                                                </div>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            )}

                            {/* STEP 4: Results */}
                            {step === 'result' && (
                                <div className="animate-fadeIn pb-20">
                                    <div className="flex bg-slate-200 p-1 rounded-lg mb-6 no-print">
                                        <button onClick={()=>{setViewMode('patient'); setAiResult('');}} className={`flex-1 py-2 text-sm font-bold rounded-md flex items-center justify-center gap-2 transition ${viewMode==='patient'?'bg-white text-blue-600 shadow':'text-slate-500'}`}>
                                            <Icons.User size={16}/> {t.result_patient}
                                        </button>
                                        <button onClick={()=>{setViewMode('doctor'); setAiResult('');}} className={`flex-1 py-2 text-sm font-bold rounded-md flex items-center justify-center gap-2 transition ${viewMode==='doctor'?'bg-slate-800 text-white shadow':'text-slate-500'}`}>
                                            <Icons.UserCheck size={16}/> {t.result_doctor}
                                        </button>
                                    </div>

                                    {/* Patient View (Localized) */}
                                    {viewMode === 'patient' && (
                                        <div className="space-y-6">
                                            <div className={`p-8 rounded-3xl flex flex-col items-center justify-center space-y-4 shadow-lg border-4 text-center ${result.status==='safe'?'bg-green-50 border-green-100':result.status==='caution'?'bg-yellow-50 border-yellow-100':'bg-red-50 border-red-100'}`}>
                                                {result.status==='safe' && <Icons.CheckCircle className="w-24 h-24 text-green-500"/>}
                                                {result.status==='caution' && <Icons.AlertTriangle className="w-24 h-24 text-yellow-500"/>}
                                                {result.status==='danger' && <Icons.ShieldAlert className="w-24 h-24 text-red-500"/>}
                                                <h2 className="text-2xl font-bold">{t[result.status]}</h2>
                                                <p className="text-slate-600 font-medium whitespace-pre-line">{result.patientMessage}</p>
                                            </div>

                                            {/* AI Section (Localized) */}
                                            <div className="bg-blue-50 border border-blue-100 rounded-xl p-5 no-print">
                                                <div className="flex items-center gap-2 mb-3">
                                                    <Icons.Sparkles className="text-blue-600 w-5 h-5"/> <h3 className="font-bold text-blue-900">{t.ai_title}</h3>
                                                </div>
                                                <p className="text-xs text-blue-700 mb-3">{t.ai_desc}</p>
                                                <div className="flex gap-2">
                                                    <input type="text" value={patientQuestion} onChange={e=>setPatientQuestion(e.target.value)} placeholder={t.ai_placeholder} className="flex-1 p-2 border rounded outline-none text-sm"/>
                                                    <button onClick={askPatientAI} disabled={aiLoading} className="bg-blue-600 text-white px-4 rounded font-bold text-sm">{aiLoading?<div className="loader"></div>:t.ai_btn}</button>
                                                </div>
                                                {aiResult && <div className="mt-4 bg-white p-4 rounded border text-sm" dangerouslySetInnerHTML={{__html: marked.parse(aiResult)}}/>}
                                                {aiError && <p className="text-red-500 text-xs mt-2">{aiError}</p>}
                                            </div>

                                            {/* Checked Items */}
                                            <div className="bg-white p-5 rounded-xl shadow-sm border">
                                                <h3 className="font-bold text-slate-700 mb-3 flex items-center gap-2"><Icons.FileText size={18}/> {t.items_checked}</h3>
                                                <ul className="space-y-2 text-sm">
                                                    {!answers.dental_extraction && !answers.dental_anesthesia && !QUESTIONS.some(q=>answers[q.id]) ? (
                                                        <li className="text-slate-400">{t.none}</li>
                                                    ) : (
                                                        <>
                                                            {answers.dental_extraction && <li>‚Ä¢ {t.q_extraction}</li>}
                                                            {answers.dental_anesthesia && <li>‚Ä¢ {t.q_anesthesia} {answers.dental_anesthesia_allergy?`(${t.q_allergy}: ${t.yes})`:''}</li>}
                                                            {QUESTIONS.filter(q=>answers[q.id]).map(q=>(<li key={q.id}>‚Ä¢ {t[q.key]}</li>))}
                                                        </>
                                                    )}
                                                </ul>
                                            </div>
                                        </div>
                                    )}

                                    {/* Doctor View (Always Korean) */}
                                    {viewMode === 'doctor' && (
                                        <div className="space-y-4">
                                            <div className="bg-slate-800 text-white p-4 rounded-xl shadow-lg">
                                                <h3 className="font-bold text-lg flex items-center gap-2"><Icons.Stethoscope size={20}/> Clinical Summary (KR)</h3>
                                                <div className="text-sm mt-1">
                                                    Status: <span className={`font-bold px-1 rounded ${result.status==='safe'?'bg-green-500':result.status==='caution'?'bg-yellow-500 text-black':'bg-red-500'}`}>{result.status.toUpperCase()}</span> | Language: {lang.toUpperCase()}
                                                </div>
                                            </div>
                                            {result.doctorNotes.length > 0 && (
                                                <div className="bg-white border p-4 rounded-xl shadow-sm no-print">
                                                    <h4 className="font-bold text-slate-700 flex gap-2 mb-2"><Icons.Sparkles size={16} className="text-purple-600"/> AI Assistance (Korean)</h4>
                                                    <button onClick={generateReferralLetter} disabled={aiLoading} className="w-full py-2 bg-purple-50 text-purple-700 border border-purple-200 rounded font-bold text-sm flex justify-center items-center gap-2">
                                                        {aiLoading?<div className="loader"></div>:'ÏßÑÎ£å ÏùòÎ¢∞ÏÑú ÏûëÏÑ± (Referral Letter)'}
                                                    </button>
                                                    {aiResult && <div className="mt-3 bg-slate-50 p-4 rounded border text-sm font-mono whitespace-pre-wrap">{aiResult}</div>}
                                                </div>
                                            )}
                                            {result.doctorNotes.length === 0 ? (
                                                <div className="text-center py-10 bg-white border border-dashed rounded-xl text-slate-500">No Specific Contraindications</div>
                                            ) : (
                                                result.doctorNotes.map((note, i) => (
                                                    <div key={i} className={`border-l-4 rounded-r-xl p-4 bg-white shadow-sm ${note.type==='critical'?'border-red-600':note.type==='danger'?'border-orange-500':note.type==='warning'?'border-yellow-500':'border-blue-500'}`}>
                                                        <h4 className="font-bold text-sm mb-1 flex items-center gap-2">{note.type==='critical'&&<Icons.AlertTriangle size={16} className="text-red-600"/>}{note.title}</h4>
                                                        <p className="text-sm text-slate-600">{note.content}</p>
                                                    </div>
                                                ))
                                            )}
                                        </div>
                                    )}
                                </div>
                            )}
                        </main>

                        {/* Navigation Footer */}
                        {step !== 'lang_select' && step !== 'result' && (
                            <div className="p-4 bg-white border-t no-print">
                                {step === 'intro' ? null : (
                                    <button 
                                        onClick={() => step==='dental_history' ? setStep('survey') : handleNext()}
                                        disabled={step==='dental_history'?!dentalAnswered:!medicalAnswered}
                                        className={`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 shadow-lg transition
                                            ${(step==='dental_history'?dentalAnswered:medicalAnswered) ? 'bg-blue-600 text-white hover:bg-blue-700 active:scale-95' : 'bg-slate-200 text-slate-400 cursor-not-allowed'}`}
                                    >
                                        {step === 'dental_history' ? t.btn_next : t.btn_result} <Icons.ChevronRight />
                                    </button>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<DentalScreeningApp />);
    </script>
</body>
</html>